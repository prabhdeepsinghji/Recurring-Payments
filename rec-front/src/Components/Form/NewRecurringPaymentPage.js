import { Button, TextField, Radio, Snackbar } from "@mui/material";
// import { useFormik } from "formik";
import React, { useState, useEffect } from "react";
import { useDispatch, connect } from "react-redux";
import { addRecurring } from "../../Actions/reccpayaction";
// import * as Yup from "yup";
import styles from "./newreccform.module.css";

function NewRecurringPaymentPage(props) {
  const dispatch = useDispatch();
  const [description, setDescription] = useState("water");
  const [startDate, setStartDate] = useState("");
  const [noOfTimes, setNoOfTimes] = useState(0);
  const [amount, setAmount] = useState(0);
  const handleDescription = (e) => {
    setDescription(e.target.value);
  };
  const handleStartDate = (e) => {
    setStartDate(e.target.value);
  };
  const handleNoOfTimes = (e) => {
    setNoOfTimes(e.target.value);
  };
  const handleAmount = (e) => {
    setAmount(e.target.value);
  };
  const handleAdd = () => {
    const data = {
      description,
      startDate,
      noOfTimes,
      amount,
      token: props.user.token,
    };
    console.log(data);
    dispatch(addRecurring(data));
  };
  useEffect(() => {
    console.log(props.msg);
  });
  return (
    <div>
      <Snackbar open={props.msg} message="Added" />
      <div className={styles.recc_main}>
        <h1 className={styles.recc_title}>Setup New Reccuring Payment</h1>
        <form>
          <div className={styles.select_utility}>
            <p className={styles.select_utility_heading}>Select Utility</p>
            <div className={styles.utility_button}>
              <div>
                <Radio
                  checked={description === "water"}
                  onChange={handleDescription}
                  id="water-btn"
                  value="water"
                  className={styles.select_utility_btn}
                  name="util"
                  checkedIcon={
                    <svg
                      width="100"
                      height="100"
                      viewBox="0 0 100 100"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M50 8.33334C27.7917 27.2917 16.6667 43.6667 16.6667 57.5C16.6667 78.25 32.5 91.6667 50 91.6667C67.5 91.6667 83.3333 78.25 83.3333 57.5C83.3333 43.6667 72.2083 27.2917 50 8.33334ZM32.625 58.3333C34.1667 58.3333 35.4167 59.4167 35.7083 60.9167C37.4167 70.1667 45.2083 73.3333 50.875 72.875C52.6667 72.7917 54.1667 74.2083 54.1667 76C54.1667 77.6667 52.8333 79.0417 51.1667 79.125C42.2917 79.6667 31.9167 74.5833 29.5417 61.9583C29.4693 61.5116 29.4948 61.0545 29.6164 60.6186C29.738 60.1827 29.9528 59.7784 30.246 59.4337C30.5393 59.0889 30.9038 58.812 31.3146 58.622C31.7253 58.432 32.1725 58.3336 32.625 58.3333V58.3333Z"
                        fill="black"
                      />
                    </svg>
                  }
                  icon={
                    <svg
                      width="100"
                      height="100"
                      viewBox="0 0 100 100"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M50 8.33334C27.7917 27.2917 16.6667 43.6667 16.6667 57.5C16.6667 78.25 32.5 91.6667 50 91.6667C67.5 91.6667 83.3333 78.25 83.3333 57.5C83.3333 43.6667 72.2083 27.2917 50 8.33334ZM32.625 58.3333C34.1667 58.3333 35.4167 59.4167 35.7083 60.9167C37.4167 70.1667 45.2083 73.3333 50.875 72.875C52.6667 72.7917 54.1667 74.2083 54.1667 76C54.1667 77.6667 52.8333 79.0417 51.1667 79.125C42.2917 79.6667 31.9167 74.5833 29.5417 61.9583C29.4693 61.5116 29.4948 61.0545 29.6164 60.6186C29.738 60.1827 29.9528 59.7784 30.246 59.4337C30.5393 59.0889 30.9038 58.812 31.3146 58.622C31.7253 58.432 32.1725 58.3336 32.625 58.3333V58.3333Z"
                        fill="grey"
                      />
                    </svg>
                  }
                ></Radio>
                <label htmlFor="water-btn">
                  <br />
                  Water Bill
                </label>
              </div>
              <div>
                <Radio
                  checked={description === "electricity"}
                  onChange={handleDescription}
                  id="elec-btn"
                  value="electricity"
                  className={styles.select_utility_btn}
                  name="util"
                  checkedIcon={
                    <svg
                      width="100"
                      height="100"
                      viewBox="0 0 100 100"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M56.25 90.625H43.75C42.9212 90.625 42.1263 90.9542 41.5403 91.5403C40.9542 92.1263 40.625 92.9212 40.625 93.75C40.625 94.5788 40.9542 95.3737 41.5403 95.9597C42.1263 96.5458 42.9212 96.875 43.75 96.875H56.25C57.0788 96.875 57.8737 96.5458 58.4597 95.9597C59.0458 95.3737 59.375 94.5788 59.375 93.75C59.375 92.9212 59.0458 92.1263 58.4597 91.5403C57.8737 90.9542 57.0788 90.625 56.25 90.625Z"
                        fill="black"
                      />
                      <path
                        d="M59.375 81.25H40.625C39.7962 81.25 39.0013 81.5792 38.4153 82.1653C37.8292 82.7513 37.5 83.5462 37.5 84.375C37.5 85.2038 37.8292 85.9987 38.4153 86.5847C39.0013 87.1708 39.7962 87.5 40.625 87.5H59.375C60.2038 87.5 60.9987 87.1708 61.5847 86.5847C62.1708 85.9987 62.5 85.2038 62.5 84.375C62.5 83.5462 62.1708 82.7513 61.5847 82.1653C60.9987 81.5792 60.2038 81.25 59.375 81.25Z"
                        fill="black"
                      />
                      <path
                        d="M72.1523 12.2441C66.2793 6.36328 58.4121 3.125 50 3.125C45.8934 3.11521 41.8254 3.91683 38.0295 5.48383C34.2337 7.05082 30.7848 9.3523 27.8811 12.2561C24.9773 15.1599 22.6758 18.6087 21.1088 22.4046C19.5418 26.2004 18.7402 30.2684 18.75 34.375C18.75 43.4805 22.2402 51.9981 28.3203 57.7422L29.1718 58.541C32.6894 61.8301 37.5 66.3359 37.5 70.3125V75C37.5 75.8288 37.8292 76.6237 38.4153 77.2097C39.0013 77.7958 39.7962 78.125 40.625 78.125H45.3125C45.7269 78.125 46.1243 77.9604 46.4173 77.6674C46.7103 77.3743 46.875 76.9769 46.875 76.5625V53.6758C46.8751 53.3598 46.7794 53.0512 46.6005 52.7907C46.4216 52.5303 46.168 52.3302 45.873 52.2168C44.0685 51.4806 42.3542 50.5402 40.7636 49.4141C40.4062 49.1858 40.099 48.8872 39.8606 48.5364C39.6223 48.1856 39.4579 47.7899 39.3774 47.3736C39.2968 46.9572 39.3019 46.5288 39.3923 46.1144C39.4827 45.7 39.6564 45.3084 39.903 44.9633C40.1496 44.6183 40.4638 44.327 40.8266 44.1073C41.1893 43.8876 41.593 43.744 42.013 43.6853C42.433 43.6267 42.8606 43.6541 43.2697 43.7659C43.6788 43.8778 44.0608 44.0717 44.3925 44.3359C45.8379 45.3594 48.6211 46.875 50 46.875C51.3789 46.875 54.1621 45.3555 55.6113 44.3359C56.2861 43.9117 57.0975 43.7614 57.8794 43.9157C58.6614 44.0699 59.3549 44.5172 59.818 45.1659C60.2811 45.8146 60.4788 46.6158 60.3706 47.4055C60.2625 48.1952 59.8567 48.9137 59.2363 49.4141C57.6454 50.5382 55.9312 51.4766 54.1269 52.2109C53.832 52.3243 53.5783 52.5244 53.3994 52.7849C53.2206 53.0454 53.1249 53.3539 53.125 53.6699V76.5625C53.125 76.9769 53.2896 77.3743 53.5826 77.6674C53.8756 77.9604 54.2731 78.125 54.6875 78.125H59.375C60.2038 78.125 60.9986 77.7958 61.5847 77.2097C62.1707 76.6237 62.5 75.8288 62.5 75V70.3125C62.5 66.4297 67.2578 61.9277 70.7324 58.6387L71.6914 57.7285C77.9453 51.7578 81.25 43.6738 81.25 34.375C81.2707 30.2681 80.4773 26.1977 78.9158 22.3992C77.3543 18.6006 75.0555 15.1491 72.1523 12.2441V12.2441Z"
                        fill="black"
                      />
                    </svg>
                  }
                  icon={
                    <svg
                      width="100"
                      height="100"
                      viewBox="0 0 100 100"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M56.25 90.625H43.75C42.9212 90.625 42.1263 90.9542 41.5403 91.5403C40.9542 92.1263 40.625 92.9212 40.625 93.75C40.625 94.5788 40.9542 95.3737 41.5403 95.9597C42.1263 96.5458 42.9212 96.875 43.75 96.875H56.25C57.0788 96.875 57.8737 96.5458 58.4597 95.9597C59.0458 95.3737 59.375 94.5788 59.375 93.75C59.375 92.9212 59.0458 92.1263 58.4597 91.5403C57.8737 90.9542 57.0788 90.625 56.25 90.625Z"
                        fill="grey"
                      />
                      <path
                        d="M59.375 81.25H40.625C39.7962 81.25 39.0013 81.5792 38.4153 82.1653C37.8292 82.7513 37.5 83.5462 37.5 84.375C37.5 85.2038 37.8292 85.9987 38.4153 86.5847C39.0013 87.1708 39.7962 87.5 40.625 87.5H59.375C60.2038 87.5 60.9987 87.1708 61.5847 86.5847C62.1708 85.9987 62.5 85.2038 62.5 84.375C62.5 83.5462 62.1708 82.7513 61.5847 82.1653C60.9987 81.5792 60.2038 81.25 59.375 81.25Z"
                        fill="grey"
                      />
                      <path
                        d="M72.1523 12.2441C66.2793 6.36328 58.4121 3.125 50 3.125C45.8934 3.11521 41.8254 3.91683 38.0295 5.48383C34.2337 7.05082 30.7848 9.3523 27.8811 12.2561C24.9773 15.1599 22.6758 18.6087 21.1088 22.4046C19.5418 26.2004 18.7402 30.2684 18.75 34.375C18.75 43.4805 22.2402 51.9981 28.3203 57.7422L29.1718 58.541C32.6894 61.8301 37.5 66.3359 37.5 70.3125V75C37.5 75.8288 37.8292 76.6237 38.4153 77.2097C39.0013 77.7958 39.7962 78.125 40.625 78.125H45.3125C45.7269 78.125 46.1243 77.9604 46.4173 77.6674C46.7103 77.3743 46.875 76.9769 46.875 76.5625V53.6758C46.8751 53.3598 46.7794 53.0512 46.6005 52.7907C46.4216 52.5303 46.168 52.3302 45.873 52.2168C44.0685 51.4806 42.3542 50.5402 40.7636 49.4141C40.4062 49.1858 40.099 48.8872 39.8606 48.5364C39.6223 48.1856 39.4579 47.7899 39.3774 47.3736C39.2968 46.9572 39.3019 46.5288 39.3923 46.1144C39.4827 45.7 39.6564 45.3084 39.903 44.9633C40.1496 44.6183 40.4638 44.327 40.8266 44.1073C41.1893 43.8876 41.593 43.744 42.013 43.6853C42.433 43.6267 42.8606 43.6541 43.2697 43.7659C43.6788 43.8778 44.0608 44.0717 44.3925 44.3359C45.8379 45.3594 48.6211 46.875 50 46.875C51.3789 46.875 54.1621 45.3555 55.6113 44.3359C56.2861 43.9117 57.0975 43.7614 57.8794 43.9157C58.6614 44.0699 59.3549 44.5172 59.818 45.1659C60.2811 45.8146 60.4788 46.6158 60.3706 47.4055C60.2625 48.1952 59.8567 48.9137 59.2363 49.4141C57.6454 50.5382 55.9312 51.4766 54.1269 52.2109C53.832 52.3243 53.5783 52.5244 53.3994 52.7849C53.2206 53.0454 53.1249 53.3539 53.125 53.6699V76.5625C53.125 76.9769 53.2896 77.3743 53.5826 77.6674C53.8756 77.9604 54.2731 78.125 54.6875 78.125H59.375C60.2038 78.125 60.9986 77.7958 61.5847 77.2097C62.1707 76.6237 62.5 75.8288 62.5 75V70.3125C62.5 66.4297 67.2578 61.9277 70.7324 58.6387L71.6914 57.7285C77.9453 51.7578 81.25 43.6738 81.25 34.375C81.2707 30.2681 80.4773 26.1977 78.9158 22.3992C77.3543 18.6006 75.0555 15.1491 72.1523 12.2441V12.2441Z"
                        fill="grey"
                      />
                    </svg>
                  }
                ></Radio>
                <label htmlFor="elec-btn">
                  <br />
                  Electricity Bill
                </label>
              </div>
              <div>
                <Radio
                  checked={description === "gas"}
                  onChange={handleDescription}
                  value="gas"
                  id="gas-btn"
                  className={styles.select_utility_btn}
                  name="util"
                  checkedIcon={
                    <svg
                      width="100"
                      height="100"
                      viewBox="0 0 100 100"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M66.6666 37.5V83.3333C66.6666 85.5435 65.7887 87.6631 64.2259 89.2259C62.6631 90.7887 60.5435 91.6667 58.3333 91.6667H41.6666C39.4565 91.6667 37.3369 90.7887 35.7741 89.2259C34.2113 87.6631 33.3333 85.5435 33.3333 83.3333V37.5C33.3333 29.75 38.625 23.2083 45.8333 21.375V16.6667H37.5V8.33334H62.5V16.6667H54.1666V21.375C61.375 23.2083 66.6666 29.75 66.6666 37.5Z"
                        fill="black"
                      />
                    </svg>
                  }
                  icon={
                    <svg
                      width="100"
                      height="100"
                      viewBox="0 0 100 100"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M66.6666 37.5V83.3333C66.6666 85.5435 65.7887 87.6631 64.2259 89.2259C62.6631 90.7887 60.5435 91.6667 58.3333 91.6667H41.6666C39.4565 91.6667 37.3369 90.7887 35.7741 89.2259C34.2113 87.6631 33.3333 85.5435 33.3333 83.3333V37.5C33.3333 29.75 38.625 23.2083 45.8333 21.375V16.6667H37.5V8.33334H62.5V16.6667H54.1666V21.375C61.375 23.2083 66.6666 29.75 66.6666 37.5Z"
                        fill="grey"
                      />
                    </svg>
                  }
                ></Radio>
                <label htmlFor="gas-btn">
                  <br />
                  Gas Bill
                </label>
              </div>
            </div>
          </div>
        </form>
        <div className={styles.recc_bottom}>
          <div className={styles.recc_bottom_1}>
            <form action="">
              <div className={styles.start_date_input}>
                <label className={styles.select_utility_heading} htmlFor="">
                  Start Date
                </label>
                <TextField
                  required
                  type="date"
                  id="outlined-required"
                  size="small"
                  margin="normal"
                  onChange={handleStartDate}
                />
              </div>
              <div className={styles.times_input}>
                <label className={styles.select_utility_heading} htmlFor="">
                  Number of times
                </label>
                <TextField
                  type="number"
                  required
                  id="outlined-required"
                  size="small"
                  margin="normal"
                  onChange={handleNoOfTimes}
                />
              </div>
            </form>
          </div>
          <div className={styles.recc_bottom_2}>
            <form action="" className={styles.amt_form}>
              <label className={styles.select_utility_heading} htmlFor="">
                Amount
              </label>
              <TextField
                type="number"
                required
                id="outlined-required"
                size="small"
                margin="normal"
                onChange={handleAmount}
              />
            </form>
            <Button
              variant="outlined"
              size="medium"
              width="100%"
              onClick={handleAdd}
            >
              Add
            </Button>
          </div>
        </div>
      </div>
    </div>
  );
}

const mapStateToProps = (state) => {
  return {
    msg: state.recc.msg,
    user: state.login,
  };
};

export default connect(mapStateToProps)(NewRecurringPaymentPage);
